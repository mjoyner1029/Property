# Environment Configuration Example for Asset Anchor Backend
# Copy this file to .env and fill in the values for your environment
# Required variables are marked with [REQUIRED]

# Application Environment
APP_ENV=development  # Options: development, testing, production [REQUIRED]
# Controls which configuration class is used (DevelopmentConfig, TestingConfig, ProductionConfig)
# In development mode, many variables have safe defaults if not specified

VERSION=1.0.0
DEBUG=False  # Set to True for development

# Security - Generate strong secrets with high entropy [REQUIRED in production]
# Use `python -c "import secrets; print(secrets.token_hex(32))"`
# In development mode, defaults are provided if not specified
SECRET_KEY=generate_a_strong_random_key_here
JWT_SECRET_KEY=generate_a_different_strong_random_key_here

# Database [REQUIRED]
DATABASE_URL=postgresql://username:password@localhost:5432/assetanchor
# For SQLite (development): DATABASE_URL=sqlite:///instance/app.db
# In development mode, defaults to SQLite in instance/dev.db if not specified

# CORS Settings - comma-separated list of allowed origins [REQUIRED in production]
# Values will be parsed into a list, or kept as "*" for wildcard (not recommended in production)
CORS_ORIGINS=http://localhost:3000,https://app.assetanchor.io
# In development mode, defaults to http://localhost:3000 if not specified

# Sentry Error Tracking [REQUIRED in production]
SENTRY_DSN=https://your-dsn-here@sentry.io/your-project
# In development mode, Sentry integration is disabled if not specified
SENTRY_TRACES_SAMPLE_RATE=0.05  # Percentage of requests to sample for performance monitoring
SENTRY_PROFILES_SAMPLE_RATE=0.01  # Percentage of requests to profile for performance data

# Redis for Rate Limiting and Caching
REDIS_URL=redis://localhost:6379/0

# Rate Limiting
# Configure these values to adjust rate limits per environment
# Format: "X per timeunit, Y per timeunit" (e.g., "100 per minute, 5000 per day")
RATELIMIT_DEFAULT="3000 per day, 1000 per hour, 100 per minute"
RATELIMIT_STORAGE_URL=redis://localhost:6379/0  # Use Redis for production
RATELIMIT_ENABLED=True  # Set to False to disable rate limiting completely

# Stripe Payment Processing
STRIPE_SECRET_KEY=sk_test_xxx
STRIPE_PUBLISHABLE_KEY=pk_test_your_test_key_here
STRIPE_WEBHOOK_SECRET=whsec_xxx

# Email Configuration
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USE_TLS=True
MAIL_USE_SSL=False
MAIL_USERNAME=your_email@gmail.com
MAIL_PASSWORD=your_email_password_or_app_password
MAIL_DEFAULT_SENDER=Asset Anchor <no-reply@assetanchor.io>

# Twilio SMS Integration
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_FROM_NUMBER=+1XXXXXXXXXX

# Security Features
FORCE_HTTPS=True  # Force HTTPS in production
SESSION_COOKIE_SECURE=True  # Secure cookies in production
CSP_ENFORCE=True  # Content Security Policy enforcement
CSP_REPORT_URI=https://your-reporting-endpoint.com/csp-report  # Optional CSP reporting endpoint
# Additional CSP domains as needed: format is directive1:domain1,domain2;directive2:domain3,domain4
# EXTRA_CSP_DOMAINS=script-src:https://cdn.example.com,https://analytics.example.com;img-src:https://images.example.com

# Password Policy
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_UPPERCASE=True
PASSWORD_REQUIRE_LOWERCASE=True
PASSWORD_REQUIRE_NUMBERS=True
PASSWORD_REQUIRE_SPECIAL=True

# Account Security
ACCOUNT_LOCKOUT_MAX_ATTEMPTS=5  # Number of failed attempts before lockout
ACCOUNT_LOCKOUT_WINDOW_MINUTES=15  # Time window to count failed attempts
ACCOUNT_LOCKOUT_DURATION_MINUTES=30  # How long the account stays locked

# Rate Limiting
RATELIMIT_DEFAULT=3000 per day,1000 per hour,100 per minute
RATELIMIT_STORAGE_URL=${REDIS_URL}
RATELIMIT_KEY_PREFIX=assetanchor-limiter

# Logging
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_REQUESTS=False  # Set to True to log all API requests (noisy)

# File Uploads
UPLOAD_FOLDER=uploads
UPLOAD_DIR=./uploads
DOC_UPLOAD_DIR=./uploads/docs
MAX_CONTENT_LENGTH=16777216  # 16MB max upload size

# Test-specific settings (only used when APP_ENV=testing)
TEST_DATABASE_URL=sqlite:///:memory:
